(function($){var tool;tool=$.tools.tabs.slideshow={conf:{next:'.forward',prev:'.backward',disabledClass:'disabled',autoplay:false,autopause:true,interval:3000,clickable:true,api:false}};function Slideshow(root,conf){var self=this,fire=root.add(this),tabs=root.data("tabs"),timer,stopped=true;function find(query){var el=$(query);return el.length<2?el:root.parent().find(query);}var nextButton=find(conf.next).click(function(){tabs.next();});var prevButton=find(conf.prev).click(function(){tabs.prev();});$.extend(self,{getTabs:function(){return tabs;},getConf:function(){return conf;},play:function(){if(timer){return self;}var e=$.Event("onBeforePlay");fire.trigger(e);if(e.isDefaultPrevented()){return self;}timer=setInterval(tabs.next,conf.interval);stopped=false;fire.trigger("onPlay");return self;},pause:function(){if(!timer){return self;}var e=$.Event("onBeforePause");fire.trigger(e);if(e.isDefaultPrevented()){return self;}timer=clearInterval(timer);fire.trigger("onPause");return self;},stop:function(){self.pause();stopped=true;}});$.each("onBeforePlay,onPlay,onBeforePause,onPause".split(","),function(i,name){if($.isFunction(conf[name])){$(self).bind(name,conf[name]);}self[name]=function(fn){return $(self).bind(name,fn);};});if(conf.autopause){tabs.getTabs().add(nextButton).add(prevButton).add(tabs.getPanes()).hover(self.pause,function(){if(!stopped){self.play();}});}if(conf.autoplay){self.play();}if(conf.clickable){tabs.getPanes().click(function(){tabs.next();});}if(!tabs.getConf().rotate){var disabled=conf.disabledClass;if(!tabs.getIndex()){prevButton.addClass(disabled);}tabs.onBeforeClick(function(e,i){prevButton.toggleClass(disabled,!i);nextButton.toggleClass(disabled,i==tabs.getTabs().length-1);});}}$.fn.slideshow=function(conf){var el=this.data("slideshow");if(el){return el;}conf=$.extend({},tool.conf,conf);this.each(function(){el=new Slideshow($(this),conf);$(this).data("slideshow",el);});return conf.api?el:this;};})(jQuery);